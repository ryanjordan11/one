<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grok AI Chatbot</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #000000;
            color: #ffffff;
            height: 100vh;
            overflow: hidden;
            display: flex;
        }

        .sidebar {
            width: 260px;
            background-color: #0a0a0a;
            border-right: 1px solid #2a2a2a;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            overflow-y: auto;
        }

        .sidebar h3 {
            font-size: 14px;
            color: #888;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .suggestion {
            background-color: #1a1a1a;
            padding: 12px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid #2a2a2a;
            font-size: 14px;
        }

        .suggestion:hover {
            background-color: #2a2a2a;
            border-color: #3a3a3a;
        }

        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .chat-container {
            flex: 1;
            overflow-y: auto;
            padding: 40px 20px 120px 20px;
            display: flex;
            flex-direction: column;
        }

        .header {
            text-align: center;
            margin: 60px 0 40px 0;
        }

        .header h1 {
            font-size: 32px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .message {
            margin: 15px 0;
            padding: 16px 20px;
            border-radius: 12px;
            max-width: 80%;
            line-height: 1.6;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .user-message {
            background-color: #1a5fb4;
            align-self: flex-end;
            margin-left: auto;
        }

        .ai-message {
            background-color: #1a1a1a;
            align-self: flex-start;
            border: 1px solid #2a2a2a;
        }

        .input-container {
            position: fixed;
            bottom: 70px;
            left: 260px;
            right: 0;
            padding: 20px;
            background: linear-gradient(to top, #000000 80%, transparent);
        }

        .input-wrapper {
            max-width: 800px;
            margin: 0 auto;
            background-color: #1a1a1a;
            border: 1px solid #2a2a2a;
            border-radius: 24px;
            display: flex;
            align-items: center;
            padding: 12px 16px;
            gap: 12px;
        }

        .input-wrapper:focus-within {
            border-color: #1a5fb4;
        }

        .attach-btn, .mic-btn, .send-btn {
            background: none;
            border: none;
            color: #888;
            cursor: pointer;
            padding: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: color 0.2s;
            font-size: 20px;
        }

        .attach-btn:hover, .mic-btn:hover, .send-btn:hover {
            color: #fff;
        }

        .mic-btn.recording {
            color: #ff4444;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        #messageInput {
            flex: 1;
            background: none;
            border: none;
            color: #ffffff;
            font-size: 15px;
            outline: none;
            padding: 8px;
        }

        #messageInput::placeholder {
            color: #666;
        }

        .footer {
            position: fixed;
            bottom: 0;
            left: 260px;
            right: 0;
            background-color: #0a0a0a;
            border-top: 1px solid #2a2a2a;
            padding: 15px 20px;
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .footer-btn {
            background-color: #1a1a1a;
            border: 1px solid #2a2a2a;
            color: #888;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
        }

        .footer-btn:hover {
            background-color: #2a2a2a;
            color: #fff;
            border-color: #3a3a3a;
        }

        .typing-indicator {
            display: none;
            padding: 16px 20px;
            background-color: #1a1a1a;
            border: 1px solid #2a2a2a;
            border-radius: 12px;
            max-width: 80px;
            margin: 15px 0;
        }

        .typing-indicator.active {
            display: block;
        }

        .typing-indicator span {
            height: 8px;
            width: 8px;
            background-color: #888;
            border-radius: 50%;
            display: inline-block;
            margin: 0 2px;
            animation: typing 1.4s infinite;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        .error-message {
            background-color: #4a1a1a;
            border: 1px solid #6a2a2a;
            color: #ff8888;
        }

        .api-status {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            background-color: #1a1a1a;
            border: 1px solid #2a2a2a;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #888;
        }

        .status-dot.connected {
            background-color: #44ff44;
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 200px;
            }
            .input-container {
                left: 200px;
            }
            .footer {
                left: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <h3>Suggestions</h3>
        <div class="suggestion" onclick="sendSuggestion('Tell me about Facebook')">üìò Facebook</div>
        <div class="suggestion" onclick="sendSuggestion('Tell me about Twitter')">üê¶ Twitter</div>
        <div class="suggestion" onclick="sendSuggestion('Tell me about Instagram')">üì∑ Instagram</div>
        <div class="suggestion" onclick="sendSuggestion('Tell me about YouTube')">üì∫ YouTube</div>
        <div class="suggestion" onclick="sendSuggestion('Tell me about Threads')">üßµ Threads</div>
        <div class="suggestion" onclick="sendSuggestion('What can you help me with as a browser assistant?')">üåê Browser</div>
        <div class="suggestion" onclick="sendSuggestion('Generate a funny meme idea')">üòÇ Generate Meme</div>
    </div>

    <div class="main-content">
        <div class="api-status">
            <span class="status-dot" id="statusDot"></span>
            <span id="statusText">Ready</span>
        </div>

        <div class="chat-container" id="chatContainer">
            <div class="header">
                <h1>How can I help today?</h1>
            </div>
        </div>

        <div class="input-container">
            <div class="input-wrapper">
                <button class="attach-btn" onclick="handleAttach()" title="Attach file">üìé</button>
                <input type="text" id="messageInput" placeholder="Message Grok..." onkeypress="handleKeyPress(event)">
                <button class="mic-btn" id="micBtn" onclick="toggleVoiceInput()" title="Voice input">üé§</button>
                <button class="send-btn" onclick="sendMessage()" title="Send message">‚û§</button>
            </div>
        </div>

        <div class="footer">
            <button class="footer-btn" onclick="alert('Clone UI functionality')">Clone UI</button>
            <button class="footer-btn" onclick="alert('Import Figma functionality')">Import Figma</button>
            <button class="footer-btn" onclick="alert('Create Page functionality')">Create Page</button>
            <button class="footer-btn" onclick="alert('Improve functionality')">Improve</button>
        </div>
    </div>

    <script>
        // Configuration
        const GROK_API_KEY = 'xai-YOUR_API_KEY_HERE'; // Replace with your actual xAI API key
        const GROK_API_URL = 'https://api.x.ai/v1/chat/completions';
        
        // Conversation state
        let conversationHistory = [];
        let isRecording = false;
        let recognition = null;
        let speechSynthesis = window.speechSynthesis;

        // Initialize speech recognition
        if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            recognition = new SpeechRecognition();
            recognition.continuous = false;
            recognition.interimResults = false;
            recognition.lang = 'en-US';

            recognition.onresult = function(event) {
                const transcript = event.results[0][0].transcript;
                document.getElementById('messageInput').value = transcript;
                sendMessage(true); // Auto-send and get voice response
            };

            recognition.onerror = function(event) {
                console.error('Speech recognition error:', event.error);
                updateStatus('Error with voice input', false);
                isRecording = false;
                document.getElementById('micBtn').classList.remove('recording');
            };

            recognition.onend = function() {
                isRecording = false;
                document.getElementById('micBtn').classList.remove('recording');
            };
        }

        // Toggle voice input
        function toggleVoiceInput() {
            if (!recognition) {
                alert('Voice input is not supported in your browser. Please use Chrome, Edge, or Safari.');
                return;
            }

            if (isRecording) {
                recognition.stop();
                isRecording = false;
                document.getElementById('micBtn').classList.remove('recording');
            } else {
                recognition.start();
                isRecording = true;
                document.getElementById('micBtn').classList.add('recording');
                updateStatus('Listening...', true);
            }
        }

        // Text-to-speech function
        function speak(text) {
            // Cancel any ongoing speech
            speechSynthesis.cancel();

            const utterance = new SpeechSynthesisUtterance(text);
            utterance.rate = 1.0;
            utterance.pitch = 1.0;
            utterance.volume = 1.0;
            
            // Try to use a good quality voice
            const voices = speechSynthesis.getVoices();
            const preferredVoice = voices.find(voice => 
                voice.name.includes('Google') || 
                voice.name.includes('Microsoft') ||
                voice.lang.startsWith('en')
            );
            if (preferredVoice) {
                utterance.voice = preferredVoice;
            }

            speechSynthesis.speak(utterance);
        }

        // Handle keyboard input
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Send suggestion
        function sendSuggestion(text) {
            document.getElementById('messageInput').value = text;
            sendMessage();
        }

        // Add message to chat
        function addMessage(content, isUser = false, isError = false) {
            const chatContainer = document.getElementById('chatContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : isError ? 'ai-message error-message' : 'ai-message'}`;
            messageDiv.textContent = content;
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // Show/hide typing indicator
        function showTypingIndicator(show) {
            let indicator = document.querySelector('.typing-indicator');
            if (show && !indicator) {
                indicator = document.createElement('div');
                indicator.className = 'typing-indicator active';
                indicator.innerHTML = '<span></span><span></span><span></span>';
                document.getElementById('chatContainer').appendChild(indicator);
            } else if (!show && indicator) {
                indicator.remove();
            }
            document.getElementById('chatContainer').scrollTop = document.getElementById('chatContainer').scrollHeight;
        }

        // Update API status
        function updateStatus(text, isConnected) {
            document.getElementById('statusText').textContent = text;
            const dot = document.getElementById('statusDot');
            if (isConnected) {
                dot.classList.add('connected');
            } else {
                dot.classList.remove('connected');
            }
        }

        // Send message to Grok API
        async function sendMessage(useVoice = false) {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();

            if (!message) return;

            // Add user message to chat
            addMessage(message, true);
            input.value = '';

            // Add to conversation history
            conversationHistory.push({
                role: 'user',
                content: message
            });

            // Show typing indicator
            showTypingIndicator(true);
            updateStatus('Thinking...', true);

            try {
                const response = await fetch(GROK_API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${GROK_API_KEY}`
                    },
                    body: JSON.stringify({
                        model: 'grok-beta',
                        messages: [
                            {
                                role: 'system',
                                content: 'You are Grok, a helpful and witty AI assistant created by xAI. You provide thoughtful, contextual responses based on the full conversation history. You never repeat the same response twice and always consider the context of previous messages.'
                            },
                            ...conversationHistory
                        ],
                        temperature: 0.8,
                        max_tokens: 1000
                    })
                });

                showTypingIndicator(false);

                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({}));
                    throw new Error(errorData.error?.message || `API Error: ${response.status}`);
                }

                const data = await response.json();
                const aiResponse = data.choices[0].message.content;

                // Add AI response to conversation history
                conversationHistory.push({
                    role: 'assistant',
                    content: aiResponse
                });

                // Add AI message to chat
                addMessage(aiResponse);
                updateStatus('Ready', true);

                // Speak response if voice input was used
                if (useVoice) {
                    speak(aiResponse);
                }

            } catch (error) {
                showTypingIndicator(false);
                console.error('Error:', error);
                
                let errorMessage = 'Sorry, I encountered an error. ';
                if (error.message.includes('401') || error.message.includes('403')) {
                    errorMessage += 'Please check your API key configuration.';
                } else if (error.message.includes('429')) {
                    errorMessage += 'Rate limit exceeded. Please try again later.';
                } else if (error.message.includes('Failed to fetch')) {
                    errorMessage += 'Network error. Please check your connection.';
                } else {
                    errorMessage += error.message;
                }
                
                addMessage(errorMessage, false, true);
                updateStatus('Error', false);
            }
        }

        // Handle attach button
        function handleAttach() {
            alert('File attachment feature - integrate with your file upload system');
        }

        // Load voices for speech synthesis
        if (speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = () => {
                speechSynthesis.getVoices();
            };
        }

        // Initial status check
        window.addEventListener('load', () => {
            if (GROK_API_KEY === 'xai-YOUR_API_KEY_HERE') {
                updateStatus('API Key Required', false);
                addMessage('‚ö†Ô∏è Please add your xAI API key in the JavaScript code to enable Grok AI functionality. Get your key at: https://console.x.ai/', false, true);
            } else {
                updateStatus('Ready', true);
            }
        });
    </script>
</body>
</html>